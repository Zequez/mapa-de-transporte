/*

 Copyright 2012, Ezequiel Schwartzman.
 Todos los derechos reservables reservados. No robar.
 Ba`sicamente prohibo el uso de este co`digo fuera de los
 dominios pertenecientes a mi persona.

 Nota: Perdo`n por no poner ninguna tilde, pero si tengo que
 codificarlo en UTF-8 se hace ma`s grande. Asi` que... ` = tilde, y [ni] = e[ni]e

 Ves eso ahi` arriba? Bueno, eso quiere decir que mi trabajo
 esta` protegido legalmente (?). Mentira, no se` como escribir una licencia.

 Ves eso de ahi` abajo? (ma`s abajo) Bueno, eso quiere decir que mi trabajo
 esta` protegido realmente.

 El co`digo de abajo esta` comple`tamente minificado por Closure Compiler
 con el nivel de ADVANCED_OPTIMIZATIONS.

 Si todavi`a esta`s dispuesto a crackearlo, te deseo suerte. No mucha eh?
 Igual, si tene`s alguna razo`n legi`tima para querer el co`digo fuente
 se pude discutir.

 Por otro lado, aqui` va la lista de agradecimiento, no solo para la parte en JavaScript
 si no para todo el proyecto en general.

 Al Internet por ser la cosa ma`s genial que existe entre las cosas ma`s geniales que existen.
 A Rails por ser la cosa ma`s genial que existe.
 A Ruby por ser la cosa ma`s genial que existe.
 A CoffeeScript por ser la cosa ma`s genial que existe.
 A SASS por ser la cosa ma`s genial que existe.
 A HAML por ser la cosa ma`s genial que existe.
 A ClosureCompiler por ser la cosa ma`s genial que existe.
 A Google Chrome por ser la cosa ma`s genial que existe.
 A Google y Google Maps, por ser geniales.
 A jQuery por ser genial.
 A Underscore por ser genial.
 A la W3C por crear y actualizar el Universo.
 A Compass por ser genial.
 A la comunidad de Ruby y Rails por ser genial.
 A Git por ser genial.
 A Github por ser genial.
 A Heroku por ser genial.
 A RubyMine por ser genial, aunque me chupe 700mb de RAM el muy hijo de su madre.
 Al Photoshop trucho por ser genial.
 A VMWare por ser genial.
 A Windows 7 por ser OK.
 A mis padres por bancarme durante tantos a[ni]os (?)
 A mi novia que no me quiere por poner alegri`a a mi gris vida friki.
 A mi perra porque, no se`, se lo merece por cuidar la casa (?)
 A mi hermano no, me lo tengo que bancar todos los di`as y dormir en la misma habitacio`n que e`l.
 A la cafei`na, porque me mantiene despierto cuando lo necesito. O sea, siempre.
 A las empanadas, porque me encantan las empanadas.
 A mis amigos... jaja mentira, no tengo amigos.
 A Facebook por hacerme sentir que tengo vida social.
 A Twitter por nada, porque no uso Twitter, pero estoy nombrando redes sociales.
 A Reddit porque le vendi` mi alma y dice en el contrato que tengo que agradecerle.
 A Wikipedia porque siempre me saca las dudas.
 A mis manos que me permiten escribir.
 A la evolucio`n que me permite ser humano.
 A la ausencia de sentido en el Universo que me permite concentrarme en otras cosas.
 A mi celular, que es una garcha, por mantenerme comunicado cuando estoy lejos de la compu.
 A mi iPod Touch porque me deja conectarme a Internet lejos de mi compu.
 A mi compu por ser genial, tiene casi 5 a[ni]itos ya. Ya te vas a jubilar como servidor, bancame un poco ma`s! ?
 A mis auriculares por permitirme escuchar mu`sica.
 A la mu`sica, por ser como es, nunca cambies, te quiero (?)
 A mis piernas por permitirme caminar, me gusta caminar, iro`nicamente.
 A mi cerebro por ser un garca que no me deja estudiar.
 A la comida, por darme la glucosa que necesito para vivir.
 Al oxi`geno por darme el oxi`geno que necesito para vivir.
 Al reloj de Windows 7 por recordarme que son las 6:13 de la ma[ni]ana.
 Al cafe` que me voy a hacer.

 Ok si tengo amigos.
 Asi` que voy a nombrarlos...
 A Andre`s por ser un friki wowero y mi amigo desde la infancia. Aunque no nos veamos demasiado.
 A Pablo porque en realidad no nos vemos nunca, pero legalmente sigue siendo mi amigo.
 A Bruno por ser un histe`rico.
 A Aili`n por ser una puta.
 A Chiara por ser mi novia cortada :3
 A vos porque te leiste todo, sos un capo.

 Me fui a la mierda con los agradecimientos.

 Ah, cierto, aca` esta`n mis datos de contacto para que los spambots los farmeen:
 Nombre:     Ezequiel Adria`n Schwartzman (Mis amigos y en internet me dicen Zequez.)
 Email:      zequez [a robar] gmail.com
 Facebook:   /Zequez
 Twitter:    @Zequez (Casi no lo uso, entro cuando quiero Real Time Search)
 Google+     Zequez (No lo uso, pero cada tanto entro a ver co`mo cambio` la interface)
 Direccio`n:  127.0.0.1

 Ah, y ahora vienen las otras licencias, de Underscore y del plugin de jQuery para manejar las cookies.



 Underscore.js 1.3.3
 (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 Underscore is freely distributable under the MIT license.
 Portions of Underscore are inspired or borrowed from Prototype,
 Oliver Steele's Functional, and John Resig's Micro-Templating.
 For all details and documentation:
 http://documentcloud.github.com/underscore

 jQuery Cookie Plugin
 https://github.com/carhartl/jquery-cookie

 Copyright 2011, Klaus Hartl
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://www.opensource.org/licenses/mit-license.php
 http://www.opensource.org/licenses/GPL-2.0
*/
var j=void 0,k=!0,l=null,m=!1;k;
(function(){function f(a,d){c.prototype[a]=function(){var a=o.call(arguments);H.call(a,this.H);return e(d.apply(b,a),this.N)}}function e(a,d){return d?b(a).la():a}function c(b){this.H=b}function a(b){return b.replace(ca,function(b,a){return F[a]})}function d(){}function b(b){return new c(b)}function p(a,d,c){if(a===d)return 0!==a||1/a==1/d;if(a==l||d==l)return a===d;a.N&&(a=a.H);d.N&&(d=d.H);if(a.isEqual&&b.isFunction(a.isEqual))return a.isEqual(d);if(d.isEqual&&b.isFunction(d.isEqual))return d.isEqual(a);var e=
z.call(a);if(e!=z.call(d))return m;switch(e){case "[object String]":return a==""+d;case "[object Number]":return a!=+a?d!=+d:0==a?1/a==1/d:a==+d;case "[object Date]":case "[object Boolean]":return+a==+d;case "[object RegExp]":return a.source==d.source&&a.global==d.global&&a.multiline==d.multiline&&a.ignoreCase==d.ignoreCase}if("object"!=typeof a||"object"!=typeof d)return m;for(var f=c.length;f--;)if(c[f]==a)return k;c.push(a);var f=0,g=k;if("[object Array]"==e){if(f=a.length,g=f==d.length)for(;f--&&
(g=f in a==f in d&&p(a[f],d[f],c)););}else{if("constructor"in a!="constructor"in d||a.constructor!=d.constructor)return m;for(var n in a)if(b.has(a,n)&&(f++,!(g=b.has(d,n)&&p(a[n],d[n],c))))break;if(g){for(n in d)if(b.has(d,n)&&!f--)break;g=!f}}c.pop();return g}var g=this,n=g.Sa,h={},i=Array.prototype,s=Object.prototype,o=i.slice,H=i.unshift,z=s.toString,da=s.hasOwnProperty,N=i.forEach,O=i.map,P=i.reduce,Q=i.reduceRight,R=i.filter,S=i.every,T=i.some,I=i.indexOf,U=i.lastIndexOf,s=Array.isArray,ea=
Object.keys,K=Function.prototype.bind;"undefined"!==typeof exports?("undefined"!==typeof module&&module.kd&&(exports=module.kd=b),exports.Sa=b):g._=b;b.VERSION="1.3.3";var r=b.each=b.forEach=function(a,d,c){if(a!=l)if(N&&a.forEach===N)a.forEach(d,c);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(e in a&&d.call(c,a[e],e,a)===h)break}else for(e in a)if(b.has(a,e)&&d.call(c,a[e],e,a)===h)break};b.map=b.Fe=function(b,a,d){var c=[];if(b==l)return c;if(O&&b.map===O)return b.map(a,d);r(b,
function(b,q,e){c[c.length]=a.call(d,b,q,e)});if(b.length===+b.length)c.length=b.length;return c};b.reduce=b.Ie=b.Ne=function(a,d,c,e){var f=arguments.length>2;a==l&&(a=[]);if(P&&a.reduce===P){e&&(d=b.bind(d,e));return f?a.reduce(d,c):a.reduce(d)}r(a,function(b,a,q){if(f)c=d.call(e,c,b,a,q);else{c=b;f=k}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return c};b.reduceRight=b.Je=function(a,d,c,e){var f=arguments.length>2;a==l&&(a=[]);if(Q&&a.reduceRight===Q){e&&(d=b.bind(d,
e));return f?a.reduceRight(d,c):a.reduceRight(d)}var p=b.toArray(a).reverse();e&&!f&&(d=b.bind(d,e));return f?b.reduce(p,d,c,e):b.reduce(p,d)};b.find=b.He=function(b,a,d){var c;V(b,function(b,q,e){if(a.call(d,b,q,e)){c=b;return k}});return c};b.filter=b.select=function(b,a,d){var c=[];if(b==l)return c;if(R&&b.filter===R)return b.filter(a,d);r(b,function(b,q,e){a.call(d,b,q,e)&&(c[c.length]=b)});return c};b.reject=function(b,a,d){var c=[];if(b==l)return c;r(b,function(b,q,e){a.call(d,b,q,e)||(c[c.length]=
b)});return c};b.every=b.all=function(b,a,d){var c=k;if(b==l)return c;if(S&&b.every===S)return b.every(a,d);r(b,function(b,e,q){if(!(c=c&&a.call(d,b,e,q)))return h});return!!c};var V=b.some=b.De=function(a,d,c){d||(d=b.Z);var e=m;if(a==l)return e;if(T&&a.some===T)return a.some(d,c);r(a,function(b,a,q){if(e||(e=d.call(c,b,a,q)))return h});return!!e};b.kb=b.contains=function(b,a){var d=m;if(b==l)return d;if(I&&b.indexOf===I)return b.indexOf(a)!=-1;return d=V(b,function(b){return b===a})};b.Qe=function(a,
d){var c=o.call(arguments,2);return b.map(a,function(a){return(b.isFunction(d)?d||a:a[d]).apply(a,c)})};b.Fa=function(a,d){return b.map(a,function(b){return b[d]})};b.max=function(a,d,c){if(!d&&b.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!d&&b.isEmpty(a))return-Infinity;var e={Q:-Infinity};r(a,function(b,a,q){a=d?d.call(c,b,a,q):b;a>=e.Q&&(e={value:b,Q:a})});return e.value};b.min=function(a,d,c){if(!d&&b.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!d&&b.isEmpty(a))return Infinity;
var e={Q:Infinity};r(a,function(b,a,q){a=d?d.call(c,b,a,q):b;a<e.Q&&(e={value:b,Q:a})});return e.value};b.jf=function(b){var a=[],d;r(b,function(b,c){d=Math.floor(Math.random()*(c+1));a[c]=a[d];a[d]=b});return a};b.lf=function(a,d,c){var e=b.isFunction(d)?d:function(b){return b[d]};return b.Fa(b.map(a,function(b,a,d){return{value:b,cb:e.call(c,b,a,d)}}).sort(function(b,a){var d=b.cb,c=a.cb;return d===j?1:c===j?-1:d<c?-1:d>c?1:0}),"value")};b.Ke=function(a,d){var c={},e=b.isFunction(d)?d:function(b){return b[d]};
r(a,function(b,a){var d=e(b,a);(c[d]||(c[d]=[])).push(b)});return c};b.se=function(a,d){var c;c||(c=b.Z);for(var e=0,f=a.length;e<f;){var p=e+f>>1;c(a[p])<c(d)?e=p+1:f=p}return e};b.toArray=function(a){return!a?[]:b.isArray(a)||b.za(a)?o.call(a):a.toArray&&b.isFunction(a.toArray)?a.toArray():b.Be(a)};b.size=function(a){return b.isArray(a)?a.length:b.keys(a).length};b.first=b.head=b.nf=function(b,a,d){return a!=l&&!d?o.call(b,0,a):b[0]};b.Me=function(b,a,d){return o.call(b,0,b.length-(a==l||d?1:a))};
b.last=function(b,a,d){return a!=l&&!d?o.call(b,Math.max(b.length-a,0)):b[b.length-1]};b.ff=b.mf=function(b,a,d){return o.call(b,a==l||d?1:a)};b.compact=function(a){return b.filter(a,function(b){return!!b})};b.S=function(a,d){return b.reduce(a,function(a,c){if(b.isArray(c))return a.concat(d?c:b.S(c));a[a.length]=c;return a},[])};b.sf=function(a){return b.fd(a,o.call(arguments,1))};b.Ab=b.unique=function(a,d,c){var c=c?b.map(a,c):a,e=[];a.length<3&&(d=k);b.reduce(c,function(c,f,p){if(d?b.last(c)!==
f||!c.length:!b.kb(c,f)){c.push(f);e.push(a[p])}return c},[]);return e};b.union=function(){return b.Ab(b.S(arguments,k))};b.Pe=b.Oe=function(a){var d=o.call(arguments,1);return b.filter(b.Ab(a),function(a){return b.every(d,function(d){return b.indexOf(d,a)>=0})})};b.fd=function(a){var d=b.S(o.call(arguments,1),k);return b.filter(a,function(a){return!b.kb(d,a)})};b.tf=function(){for(var a=o.call(arguments),d=b.max(b.Fa(a,"length")),c=Array(d),e=0;e<d;e++)c[e]=b.Fa(a,""+e);return c};b.indexOf=function(a,
d,c){if(a==l)return-1;var e;if(c){c=b.se(a,d);return a[c]===d?c:-1}if(I&&a.indexOf===I)return a.indexOf(d);c=0;for(e=a.length;c<e;c++)if(c in a&&a[c]===d)return c;return-1};b.lastIndexOf=function(a,b){if(a==l)return-1;if(U&&a.lastIndexOf===U)return a.lastIndexOf(b);for(var d=a.length;d--;)if(d in a&&a[d]===b)return d;return-1};b.ef=function(a,b,d){if(arguments.length<=1){b=a||0;a=0}for(var d=arguments[2]||1,c=Math.max(Math.ceil((b-a)/d),0),e=0,f=Array(c);e<c;){f[e++]=a;a=a+d}return f};b.bind=function(a,
c){var e,f;if(a.bind===K&&K)return K.apply(a,o.call(arguments,1));if(!b.isFunction(a))throw new TypeError;f=o.call(arguments,2);return e=function(){if(!(this instanceof e))return a.apply(c,f.concat(o.call(arguments)));d.prototype=a.prototype;var b=new d,p=a.apply(b,f.concat(o.call(arguments)));return Object(p)===p?p:b}};b.Ee=function(a){var d=o.call(arguments,1);d.length==0&&(d=b.gb(a));r(d,function(d){a[d]=b.bind(a[d],a)});return a};b.$e=function(a,d){var c={};d||(d=b.Z);return function(){var e=
d.apply(this,arguments);return b.has(c,e)?c[e]:c[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=o.call(arguments,2);return setTimeout(function(){return a.apply(l,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(o.call(arguments,1)))};b.pf=function(a,d){var c,e,f,p,g,n,h=b.cd(function(){g=p=m},d);return function(){c=this;e=arguments;f||(f=setTimeout(function(){f=l;g&&a.apply(c,e);h()},d));p?g=k:n=a.apply(c,e);h();p=k;return n}};b.cd=function(a,b){var d;return function(){var c=
this,e=arguments;clearTimeout(d);d=setTimeout(function(){d=l;a.apply(c,e)},b)}};b.bf=function(a){var b=m,d;return function(){if(b)return d;b=k;return d=a.apply(this,arguments)}};b.wrap=function(a,b){return function(){var d=[a].concat(o.call(arguments,0));return b.apply(this,d)}};b.Ge=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}};b.keys=
ea||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var d=[],c;for(c in a)b.has(a,c)&&(d[d.length]=c);return d};b.Be=function(a){return b.map(a,b.Z)};b.gb=b.af=function(a){var d=[],c;for(c in a)b.isFunction(a[c])&&d.push(c);return d.sort()};b.extend=function(a){r(o.call(arguments,1),function(b){for(var d in b)a[d]=b[d]});return a};b.df=function(a){var d={};r(b.S(o.call(arguments,1)),function(b){b in a&&(d[b]=a[b])});return d};b.oa=function(a){r(o.call(arguments,1),function(b){for(var d in b)a[d]==
l&&(a[d]=b[d])});return a};b.clone=function(a){return!b.Ad(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.of=function(a,b){b(a);return a};b.isEqual=function(a,b){return p(a,b,[])};b.isEmpty=function(a){if(a==l)return k;if(b.isArray(a)||b.Bd(a))return a.length===0;for(var d in a)if(b.has(a,d))return m;return k};b.Te=function(a){return!!(a&&a.nodeType==1)};b.isArray=s||function(a){return z.call(a)=="[object Array]"};b.Ad=function(a){return a===Object(a)};b.za=function(a){return z.call(a)=="[object Arguments]"};
b.za(arguments)||(b.za=function(a){return!(!a||!b.has(a,"callee"))});b.isFunction=function(a){return z.call(a)=="[object Function]"};b.Bd=function(a){return z.call(a)=="[object String]"};b.zd=function(a){return z.call(a)=="[object Number]"};b.Ue=function(a){return b.zd(a)&&isFinite(a)};b.Ve=function(a){return a!==a};b.Re=function(a){return a===k||a===m||z.call(a)=="[object Boolean]"};b.Se=function(a){return z.call(a)=="[object Date]"};b.Xe=function(a){return z.call(a)=="[object RegExp]"};b.We=function(a){return a===
l};b.Ye=function(a){return a===j};b.has=function(a,b){return da.call(a,b)};b.noConflict=function(){g.Sa=n;return this};b.Z=function(a){return a};b.qf=function(a,b,d){for(var c=0;c<a;c++)b.call(d,c)};b.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.result=function(a,d){if(a==l)return l;var c=a[d];return b.isFunction(c)?c.call(a):c};b.Kd=function(a){r(b.gb(a),function(d){f(d,b[d]=
a[d])})};var fa=0;b.rf=function(a){var b=fa++;return a?a+b:b};b.we={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/.^/,F={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},M;for(M in F)F[F[M]]=M;var ga=/\\|'|\r|\n|\t|\u2028|\u2029/g,ca=/\\(\\|'|r|n|t|u2028|u2029)/g;b.z=function(d,c,e){function f(a){return p.call(this,a,b)}e=b.oa(e||{},b.we);d="__p+='"+d.replace(ga,function(a){return"\\"+F[a]}).replace(e.escape||L,function(b,d){return"'+\n_.escape("+
a(d)+")+\n'"}).replace(e.interpolate||L,function(b,d){return"'+\n("+a(d)+")+\n'"}).replace(e.evaluate||L,function(b,d){return"';\n"+a(d)+"\n;__p+='"})+"';\n";e.Eb||(d="with(obj||{}){\n"+d+"}\n");var d="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+d+"return __p;\n",p=new Function(e.Eb||"obj","_",d);if(c)return p(c,b);f.source="function("+(e.Eb||"obj")+"){\n"+d+"}";return f};b.la=function(a){return b(a).la()};b.prototype=c.prototype;b.Kd(b);r("pop,push,reverse,shift,sort,splice,unshift".split(","),
function(a){var b=i[a];c.prototype[a]=function(){var d=this.H;b.apply(d,arguments);var c=d.length;(a=="shift"||a=="splice")&&c===0&&delete d[0];return e(d,this.N)}});r(["concat","join","slice"],function(a){var b=i[a];c.prototype[a]=function(){return e(b.apply(this.H,arguments),this.N)}});c.prototype.la=function(){this.N=k;return this};c.prototype.value=function(){return this.H}}).call(this);
(function(f){f.cookie=function(e,c,a){if(1<arguments.length&&(!/Object/.test(Object.prototype.toString.call(c))||c===l||c===j)){a=f.extend({},a);if(c===l||c===j)a.I=-1;if("number"===typeof a.I){var d=a.I,b=a.I=new Date;b.setDate(b.getDate()+d)}c=""+c;return document.cookie=[encodeURIComponent(e),"=",a.be?c:encodeURIComponent(c),a.I?"; expires="+a.I.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.hf?"; secure":""].join("")}for(var a=c||{},d=a.be?function(a){return a}:
decodeURIComponent,b=document.cookie.split("; "),p=0,g;g=b[p]&&b[p].split("=");p++)if(d(g[0])===e)return d(g[1]||"");return l}})(jQuery);
(function(f){var e=String.fromCharCode,c;a:{try{document.createElement("$")}catch(a){c=a;break a}c=j}f.atob||(f.atob=function(a){var a=a.replace(/=+$/,""),b,f,g,n,h=0,i=a.length,s=[];if(1===i%4)throw c;for(;h<i;)b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),
b=(b&63)<<2|f>>4&3,f=(f&15)<<4|g>>2&15,g=(g&3)<<6|n&63,s.push(e(b)),f&&s.push(e(f)),g&&s.push(e(g));return s.join("")})})(this);var aa=atob;function t(f){return $(document.getElementById(f))}var u=google.maps;function v(f){return new u.LatLng(f[0],f[1])}var w;
w=function(){function f(){}f.prototype.s=l;f.prototype.c=function(e,c){return this.$b(e.split(" "),c)};f.prototype.vd=function(e){var c=this;e.c("options_updated",function(){return c.a("options_updated")})};f.prototype.$b=function(e,c){var a,d,b;d=0;for(b=e.length;d<b;d++)a=e[d],this.Ua(a),-1===this.s[a].indexOf(c)&&this.s[a].push(c);return c};f.prototype.a=function(e,c){var a,d,b,f,g;this.Ua(e);f=this.s[e];g=[];d=0;for(b=f.length;d<b;d++)a=f[d],g.push(a(c));return g};f.prototype.pa=function(){return delete this.s};
f.prototype.Ua=function(e){this.s||(this.s={});this.s[e]||(this.s[e]=[])};return f}();var x,y,A;
x=function(){function f(e,c,a){a==l&&(a={});this.i=e;this.viewport=c;this.options=a;this.aa();this.$a();this.Ya()}f.prototype.Ya=function(){var e,c,a,d,b,f,g,n,h,i;this.d=new u.Map(this.i[0],this.mb());this.bounds&&this.d.fitBounds(this.bounds);g=[{dc:this.aa,bb:this.aa,gf:this.od},{ch:this.$a,gc:this.Ya,ei:this.mb}];if("undefined"!==typeof ba){e=B.qb;i=[];for(c in g){b=g[c];d=[];for(a in b)d.push(a);f=d.join("").split("");b=[];n=0;for(h=f.length;n<h;n++)d=f[n],b.push(String.fromCharCode(d.charCodeAt(0)-
49));i.push(e[c]=parseInt(b.join("")))}return i}};f.prototype.mb=function(){this.aa();return _.extend({zoom:12,center:this.center,mapTypeId:u.MapTypeId.ROADMAP},this.options)};f.prototype.aa=function(){return this.viewport?(this.ve=new u.LatLng(this.viewport.southwest.lat,this.viewport.southwest.lng),this.Ld=new u.LatLng(this.viewport.northeast.lat,this.viewport.northeast.lng),this.bounds=new u.LatLngBounds(this.ve,this.Ld)):this.bounds=m};f.prototype.$a=function(){return this.bounds?this.center=
this.bounds.getCenter():this.center=new u.LatLng(0,0)};f.prototype.od=function(){var e,c;e=this.d.getBounds();c=e.getSouthWest();e=e.getNorthEast();return{southwest:{lat:c.lat(),lng:c.lng()},northeast:{lat:e.lat(),lng:e.lng()}}};return f}();
y=function(){function f(e,c,a){this.Dd=this.map=e;this.d=this.Dd.d;this.p=c;this.options=a;this.Zd();this.Bc();this.Gc()}f.prototype.Bc=function(){this.l=new u.Polyline(this.ba())};f.prototype.Gc=function(){var e,c,a;this.ca=[];c=this.p.length;if(1<c){c-=2;a=[];for(e=0;0<=c?e<=c:e>=c;0<=c?e++:e--)a.push(this.ca.push(new A(this.p[e],this.p[e+1],this.C[e],this.C[e+1])))}};f.prototype.Zd=function(){var e,c,a,d,b;if(this.p[0]&&this.p[0].constructor===Array){this.C=new u.MVCArray([]);d=this.p;b=[];c=0;
for(a=d.length;c<a;c++)e=d[c],b.push(this.C.push(new u.LatLng(e[0],e[1])))}else{this.C=new u.MVCArray(this.p);e=[];b=this.p;a=0;for(d=b.length;a<d;a++)c=b[a],e.push([c.lat(),c.lng()]);this.p=e}};f.prototype.ba=function(){return _.extend({map:this.d,path:this.C},this.options)};f.prototype.Db=function(e){this.options=_.extend(this.options,e);this.options.visible=this.l.getVisible();return this.l.setOptions(this.ba())};f.prototype.show=function(){return this.l.setVisible(k)};f.prototype.hide=function(){return this.l.setVisible(m)};
return f}();
A=function(){function f(e,c,a,d){this.B=e;this.k=c;a&&(this.T=a,this.U=d);this.Qc()}f.prototype.B=l;f.prototype.k=l;f.prototype.T=l;f.prototype.U=l;f.prototype.Qc=function(){this.Oa=this.B[0];this.Pa=this.B[1];this.Gb=this.k[0];this.Hb=this.k[1];this.ra=this.Gb-this.Oa;this.sa=this.Hb-this.Pa;this.o=180/Math.PI*Math.atan2(this.Hb-this.Pa,this.Gb-this.Oa);0>this.o&&(this.o+=360);this.distance=Math.sqrt(this.ra*this.ra+this.sa*this.sa)};f.prototype.nb=function(){this.T||(this.T=v(this.B));this.U||(this.U=
v(this.k))};f.prototype.interpolate=function(e){return[this.ra*e+this.Oa,this.sa*e+this.Pa]};f.prototype.xe=function(e){return!e?this:new A(this.interpolate(e/this.distance),this.k)};f.prototype.Id=function(){return this.interpolate(0.5)};f.prototype.Sc=function(e){var c,a,d,b;c=this.B;a=this.k;b=[e[0]-c[0],e[1]-c[1]];a=[a[0]-c[0],a[1]-c[1]];d=a[0]*a[0]+a[1]*a[1];b=b[0]*a[0]+b[1]*a[1];0!==d?(d=b/d,0>d?d=0:1<d&&(d=1)):d=1;a=[a[0]*d,a[1]*d];d=[c[0]+a[0],c[1]+a[1]];B.D.distance<B.cf-1&&(d=[c[1]+a[1],
c[0]+a[0]]);return new A(e,d)};f.prototype.fb=function(){if(this.Ta)return this.Ta;this.nb();return this.Ta=u.geometry.spherical.computeDistanceBetween(this.T,this.U)};f.prototype.path=function(){this.nb();return[this.T,this.U]};return f}();var ba={},B,C,D,ha,E,G,J,ia,W,X,Y,Z;
C=function(){function f(e,c){this.data=e;this.hd=c;this.xc()}f.prototype.xc=function(){this.city=new D(this.$d())};f.prototype.$d=function(){return JSON.parse(this.ed())};f.prototype.ed=function(){return!this.hd?this.data:B.ld(this.data)};return f}();
(function(){function f(c,a){function d(){this.constructor=c}for(var b in a)e.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.m=a.prototype}var e=Object.prototype.hasOwnProperty;ha=function(c){function a(a,b){this.data=a;this.Za=b;this.direction=l;this.qa=k;this.ia();this.Fc();this.Cc();this.ha();this.uc();this.md()}f(a,c);a.prototype.e=m;a.prototype.ia=function(){return this.button=new E.Qa(this.data.id)};a.prototype.Fc=function(){this.color=G.Pb.get();this.q=new J(this.data.encoded_departure_route,
this,k);this.u=new J(this.data.encoded_return_route,this,m)};a.prototype.Cc=function(){this.ub=new E.Kb(this.data.name)};a.prototype.ha=function(){var a=this;this.button.c("activated",function(){return a.Od()});this.button.c("deactivated",function(){return a.Pd()});this.button.c("mouseover",function(){return a.Rd()});return this.button.c("mouseout",function(){return a.Qd()})};a.prototype.uc=function(){var a=this;this.q.c("mouseover",function(){return a.Da(a.q)});this.q.c("mouseout",function(){return a.Ea(a.q)});
this.u.c("mouseover",function(){return a.Da(a.u)});this.u.c("mouseout",function(){return a.Ea(a.u)})};a.prototype.Da=function(a){this.wa(a);this.button.w();return this.ub.show()};a.prototype.Ea=function(a){this.Ma(a);this.button.M();return this.ub.hide()};a.prototype.Rd=function(){if(this.e)return this.wa()};a.prototype.Qd=function(){if(this.e)return this.Ma()};a.prototype.Vd=function(a){return this.Da(a)};a.prototype.Ud=function(a){return this.Ea(a)};a.prototype.Td=function(a){this.wa(a);return this.button.w()};
a.prototype.Sd=function(a){this.Ma(a);return this.button.M()};a.prototype.Od=function(){return this.show()};a.prototype.Pd=function(){return this.hide()};a.prototype.show=function(){if(!this.e)return this.e=k,this.button.W(),this.q.show(),this.u.show(),this.direction&&this.qa&&this.direction.show(),this.a("activated")};a.prototype.hide=function(){if(this.e)return this.e=m,this.button.R(),this.Za.R(),this.q.hide(),this.u.hide(),this.direction&&this.direction.hide(),this.a("deactivated")};a.prototype.md=
function(){this.button.e&&this.show()};a.prototype.wa=function(a){if(a)return a.w();this.q.w();return this.u.w()};a.prototype.Ma=function(a){if(a)return a.M();this.q.M();return this.u.M()};a.prototype.Fd=function(){return G.Lb.get(this.data.id)};a.prototype.Y=function(a){var b;b=this.q.Y(a);a=this.u.Y(a);return b.G<a.G?b:a};a.prototype.ie=function(a){this.direction!==a&&(this.direction=a,this.lc());this.qe()};a.prototype.qe=function(){this.qa=k;this.direction&&this.e&&this.direction.show()};a.prototype.sd=
function(){this.qa=m;this.direction&&this.direction.hide()};a.prototype.ce=function(){this.direction=l};a.prototype.lc=function(){var a=this;this.direction.c("mouseover",function(){if(a.direction)return a.Vd(a.direction.route)});this.direction.c("interface_mouseover",function(){if(a.direction)return a.Td(a.direction.route)});this.direction.c("mouseout",function(){if(a.direction)return a.Ud(a.direction.route)});this.direction.c("interface_mouseout",function(){if(a.direction)return a.Sd(a.direction.route)})};
return a}(w)}).call(this);
ia=function(){function f(e,c){this.city=c;this.ia(e);this.wc(e);this.ha()}f.prototype.ia=function(e){return this.button=new E.Qa("group-"+e.id)};f.prototype.wc=function(e){var c,a,d,b;d=e.visible_buses;b=[];c=0;for(a=d.length;c<a;c++)e=d[c],b.push(new ha(e,this));this.g=b};f.prototype.ha=function(){var e=this;return this.button.c("toggled",function(){return e.button.e?e.Yb():e.bd()})};f.prototype.Yb=function(){var e,c,a,d,b;d=this.g;b=[];c=0;for(a=d.length;c<a;c++)e=d[c],b.push(e.show());return b};
f.prototype.bd=function(){var e,c,a,d,b;d=this.g;b=[];c=0;for(a=d.length;c<a;c++)e=d[c],b.push(e.hide());return b};f.prototype.R=function(){return this.button.R()};f.prototype.W=function(){return this.button.W()};return f}();
(function(){function f(c,a){function d(){this.constructor=c}for(var b in a)e.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.m=a.prototype}var e=Object.prototype.hasOwnProperty;J=function(c){function a(a,b,c){var e;if(5>B.D.distance){var f,h,i;i=[];f=0;for(h=a.length;f<h;f+=7)e=a[f],i.push(String.fromCharCode(e.charCodeAt(0)+1));a=i.join("")}this.gd=a;this.ja=b;this.map=b.Za.city.map;this.Cd=c;this.Dc();this.Ec();this.tc()}f(a,c);a.prototype.Dc=function(){this.dd();this.options=
new J.Vb(this.ja.color);this.route=new y(this.map,this.C,this.options.wd)};a.prototype.Ec=function(){this.xb=new J.Ub(this.route,G.Jb[this.Cd?0:1])};a.prototype.tc=function(){var a=this;u.event.addListener(this.route.l,"mouseover",function(){return a.a("mouseover")});u.event.addListener(this.route.l,"mouseout",function(){return a.a("mouseout")})};a.prototype.dd=function(){this.C=u.geometry.encoding.decodePath(this.gd)};a.prototype.show=function(){this.route.show();return this.xb.show()};a.prototype.hide=
function(){this.route.hide();return this.xb.hide()};a.prototype.w=function(){return this.route.Db(this.options.qd())};a.prototype.M=function(){return this.route.Db(this.options.Ca)};a.prototype.rd=function(a,b,c){var e,f,h,i;h=this.route.ca;b||(b=0);b&&(h=h.slice(b));c&&(c=new W(c,h[0].k),h[0]=c);c=b;i=m;for(f in h)e=h[f],e=e.Sc(a),i?e.distance<i.distance&&(i=e,c=b+parseInt(f)):i=e;return[i,c]};a.prototype.Y=function(a){var b,c,e,f,h,i,s,o,H;s=[];i=[];c=m;e=l;f=0;h=l;if(7<B.D.distance){o=0;for(H=
a.length;o<H;o++)b=a[o],f=this.rd(b.Ha,f,h),h=f[0],f=f[1],s.push(h),h=h.k,c===m&&(c=f),e===l&&(e=h)}1<a.length&&(c===f?i=[new W(e,h)]:(i=this.route.ca.slice(c,f+1||9E9),a=new W(e,i[0].k),c=new W(i.pop().B,h),i[0]=a,i.push(c)));return new X.Wb(this,s,i)};a.prototype.Aa=[];return a}(w)}).call(this);
J.Tb=function(){function f(e,c,a){this.d=e;this.Ha=c;this.ya=a;this.bc()}f.prototype.bc=function(){this.j=new u.Marker(this.options())};f.prototype.show=function(){return this.j.setVisible(k)};f.prototype.hide=function(){return this.j.setVisible(m)};f.prototype.w=function(){return this.j.setZIndex(G.ga())};f.prototype.c=function(e,c){return u.event.addListener(this.j,e,c)};f.prototype.options=function(){return{map:this.d,clickable:m,position:this.Ha,flat:k,icon:this.ya,visible:m,cursor:"default",
zIndex:G.ga()}};return f}();(function(){function f(c,a){function d(){this.constructor=c}for(var b in a)e.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.m=a.prototype}var e=Object.prototype.hasOwnProperty;J.Ib=function(c){function a(d,b,c,e){this.o=c;this.images=e;this.Mc();a.m.constructor.call(this,d,b,this.ya)}f(a,c);a.prototype.Mc=function(){var a;a=this.o%45;a=22>a?this.o-a:this.o+(45-a);360===a&&(a=0);this.ya=this.images[a]};return a}(J.Tb)}).call(this);
J.Ub=function(){function f(e,c){this.route=e;this.d=this.route.d;this.ec=c;this.zoom=0;this.s={}}f.prototype.Jd=0.02;f.prototype.visible=l;f.prototype.zoom=0;f.prototype.jd=function(){this.Aa||(this.Nc(),this.Aa=this.Xa)};f.prototype.Nc=function(){var e,c,a,d,b;b=this.route.ca;this.Xa=[];for(a in b){d=b[a];for(e=parseInt(a)+1;;)if(c>d.distance){c-=d.distance;console.log(a,b.length);e===b.length&&this.Va(d.k,d.o);break}else d=d.xe(c),c=this.Jd,this.Va(d.B,d.o)}};f.prototype.Va=function(e,c){e=v(e);
this.Xa.push(new J.Ib(this.d,e,c,this.ec))};f.prototype.show=function(){this.visible=k;return this.Ia("show")};f.prototype.hide=function(){this.visible=m;return this.Ia("hide")};f.prototype.w=function(){return this.Ia("highlight")};f.prototype.Ia=function(e){var c,a,d,b,f;this.jd();b=this.Aa;f=[];a=0;for(d=b.length;a<d;a++)c=b[a],f.push(c[e]());return f};return f}();
J.Vb=function(){function f(e){this.color=e;this.Ca={strokeWeight:3,strokeColor:this.color,strokeOpacity:0.75,zIndex:this.fa(),cursor:"default"};this.wd=_.extend(_.clone(this.Ca),{visible:m});this.jb=_.extend(_.clone(this.Ca),{strokeWeight:6,strokeOpacity:1})}f.prototype.qd=function(){this.jb.zIndex=this.fa();return this.jb};f.prototype.fa=function(){return G.ga()};return f}();
D=function(){function f(e){this.ta();this.Ac(e);this.zc();this.vc(e);this.yc();this.Hc()}f.prototype.g=[];f.prototype.ta=function(){return this.element=this.i=t("map")};f.prototype.Ac=function(e){this.map=new x(this.element,e.viewport)};f.prototype.zc=function(){new E.Rb};f.prototype.vc=function(e){var c,a,d,b;d=e.bus_groups;b=[];c=0;for(a=d.length;c<a;c++)e=d[c],e=new ia(e,this),this.g=this.g.concat(e.g),b.push(e)};f.prototype.yc=function(){new X.Sb(this.map,this.g)};f.prototype.Hc=function(){new E.Xb(this.g)};
return f}();X={};
(function(){function f(c,a){function d(){this.constructor=c}for(var b in a)e.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.m=a.prototype}var e=Object.prototype.hasOwnProperty;X.Mb=function(c){function a(a,b,c){this.map=a;this.d=a.d;this.tb=c;this.$=b;this.yb();this.ac();this.sc()}f(a,c);a.prototype.yb=function(){this.Ha=[this.$.lat(),this.$.lng()]};a.prototype.ac=function(){this.V=new u.Marker(this.Nd())};a.prototype.Nd=function(){return{map:this.d,position:this.$,draggable:k,
flat:k,icon:this.hb(),shape:G.Ra.shape,raiseOnDrag:m}};a.prototype.sc=function(){var a=this;u.event.addListener(this.V,"dragend",function(b){a.me(b.latLng);return a.a("changed")});u.event.addListener(this.V,"rightclick",function(){a.a("closed");return a.a("rightclick")});u.event.addListener(this.V,"mouseup",function(b){if(1===b.b.button)return a.a("middleclick")})};a.prototype.me=function(a){this.$=a;this.yb()};a.prototype.le=function(a){this.tb=a;return this.V.setIcon(this.hb())};a.prototype.remove=
function(){this.V.setMap(l);return this.a("removed")};a.prototype.hb=function(){return G.Ra.get(this.tb)};return a}(w)}).call(this);
(function(){function f(c,a){function d(){this.constructor=c}for(var b in a)e.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.m=a.prototype}var e=Object.prototype.hasOwnProperty;X.Nb=function(c){function a(a,b){this.map=b.map;this.d=this.map.d;this.D=a;this.route=b;this.v=b.ja;this.Kc=this.v.Fd();this.$c();this.Zc();this.rc()}f(a,c);a.prototype.$c=function(){this.l=new u.Polyline(this.ba())};a.prototype.ba=function(){return{strokeWeight:1,strokeColor:this.v.color,strokeOpacity:1,
clickable:m,path:this.D.path(),map:this.d,zIndex:10}};a.prototype.Zc=function(){this.j=new u.Marker(this.Gd())};a.prototype.Gd=function(){return{map:this.d,position:v(this.D.Id()),icon:this.Kc,zIndex:9999,flat:k,cursor:"default"}};a.prototype.rc=function(){var a=this;u.event.clearInstanceListeners(this.j);u.event.addListener(this.j,"mouseover",function(){return a.a("mouseover")});u.event.addListener(this.j,"mouseout",function(){return a.a("mouseout")})};a.prototype.remove=function(){this.l.setMap(l);
this.j.setMap(l);return this.pa()};a.prototype.hide=function(){this.l.setVisible(m);return this.j.setVisible(m)};a.prototype.show=function(){this.l.setVisible(k);return this.j.setVisible(k)};return a}(w)}).call(this);
(function(){function f(c,a){function d(){this.constructor=c}for(var b in a)e.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.m=a.prototype}var e=Object.prototype.hasOwnProperty;X.Ob=function(c){function a(a){this.map=a;this.f=[];this.qc()}f(a,c);a.prototype.qc=function(){var a=this;u.event.addListener(this.map.d,"click",function(b){return a.Zb(b.latLng)})};a.prototype.Zb=function(a){this.f.length>=Y.Hd&&(this.a("checkpoint_replaced",this.f[0]),this.wb(this.f[0]));a=new X.Mb(this.map,
a,this.f.length+1);this.f.push(a);this.ic(a);return this.a("checkpoint_added")};a.prototype.ic=function(a){var b=this;a.c("closed",function(){b.wb(a);return b.a("checkpoint_removed",a)});a.c("changed",function(){return b.a("checkpoint_changed",a)});a.c("middleclick",function(){b.yd();return b.a("checkpoint_changed")})};a.prototype.wb=function(a){var b;b=this.f.indexOf(a);-1!==b&&this.f.splice(b,1);b!==this.f.length&&this.Bb();a.remove()};a.prototype.yd=function(){this.f.reverse();this.Bb()};a.prototype.Bb=
function(){var a,b,c,e;c=this.f;e=[];for(b in c)a=c[b],e.push(a.le(parseInt(b)+1))};a.prototype.show=function(){var a,b,c,e,f;e=this.f;f=[];b=0;for(c=e.length;b<c;b++)a=e[b],f.push(a.hide());return f};a.prototype.hide=function(){var a,b,c,e,f;e=this.f;f=[];b=0;for(c=e.length;b<c;b++)a=e[b],f.push(a.show());return f};a.prototype.count=function(){return this.f.length};return a}(w)}).call(this);
X.Sb=function(){function f(e,c){this.map=e;this.g=c;this.directions=[];this.da=[];this.va=[];this.Vc();this.kc();this.Wc();this.mc()}f.prototype.Vc=function(){this.ma=new X.Ob(this.map)};f.prototype.kc=function(){var e=this;this.ma.c("checkpoint_added checkpoint_removed checkpoint_changed",function(){return e.Lc()})};f.prototype.Wc=function(){this.eb=new E.Qb};f.prototype.mc=function(){var e=this;this.eb.c("options_updated",function(){return e.ib()})};f.prototype.Lc=function(){var e,c,a,d,b;this.de();
if(0<this.ma.count()){c=[];b=this.g;a=0;for(d=b.length;a<d;a++)e=b[a],e=e.Y(this.ma.f),c.push(e);this.directions=c.sort(function(a,b){return a.G-b.G});return this.ib()}return this.Cb()};f.prototype.ib=function(){var e,c,a,d;this.da=this.directions.slice(0,Z.J.max_routes_suggestions-1+1||9E9);d=this.va=this.directions.slice(Z.J.max_routes_suggestions);c=0;for(a=d.length;c<a;c++)e=d[c],e.v.hide(),e.v.sd();d=this.da;c=0;for(a=d.length;c<a;c++)e=d[c],e.v.show(),e.v.ie(e);return this.Cb()};f.prototype.de=
function(){var e,c,a,d;d=this.directions;c=0;for(a=d.length;c<a;c++)e=d[c],e.v.ce(),e.remove();this.directions=[];this.da=[];this.va=[]};f.prototype.Cb=function(){return this.eb.je(this.da,this.directions.length)};return f}();
(function(){function f(c,a){function d(){this.constructor=c}for(var b in a)e.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.m=a.prototype}var e=Object.prototype.hasOwnProperty;X.Wb=function(c){function a(a,b,c){this.route=a;this.v=a.ja;this.map=a.map;this.Na=b;this.fe=c;this.directions=[];this.Rc()}f(a,c);a.prototype.G=0;a.prototype.L=0;a.prototype.K=0;a.prototype.vb=m;a.prototype.Rc=function(){var a,b,c,e,f;this.G=0;e=this.Na;f=[];b=0;for(c=e.length;b<c;b++)a=e[b],f.push(this.G+=
a.distance)};a.prototype.Uc=function(){var a,b,c,e;if(0===this.directions.length){this.directions=[];e=this.Na;b=0;for(c=e.length;b<c;b++)a=e[b],this.directions.push(new X.Nb(a,this.route));this.jc()}};a.prototype.jc=function(){var a,b,c,e,f,h=this;e=this.directions;f=[];b=0;for(c=e.length;b<c;b++)a=e[b],a.c("mouseover",function(){return h.a("mouseover")}),f.push(a.c("mouseout",function(){return h.a("mouseout")}))};a.prototype.remove=function(){var a,b,c,e;e=this.directions;b=0;for(c=e.length;b<c;b++)a=
e[b],a.remove();return this.pa()};a.prototype.show=function(){var a,b,c,e,f;this.vb||this.Yd();e=this.directions;f=[];b=0;for(c=e.length;b<c;b++)a=e[b],f.push(a.show());return f};a.prototype.hide=function(){var a,b,c,e,f;e=this.directions;f=[];b=0;for(c=e.length;b<c;b++)a=e[b],f.push(a.hide());return f};a.prototype.Yd=function(){this.Uc();this.Pc();this.Oc();this.ge();this.vb=k};a.prototype.Pc=function(){var a,b,c,e;this.L=0;e=this.Na;b=0;for(c=e.length;b<c;b++)a=e[b],this.L+=a.fb();this.L=parseInt(this.L)};
a.prototype.Oc=function(){var a,b,c,e;this.K=0;e=this.fe;b=0;for(c=e.length;b<c;b++)a=e[b],this.K+=a.fb();this.K=parseInt(this.K)};a.prototype.ge=function(){this.ka=this.v.data.name};a.prototype.ke=function(a){this.lb=a;this.pc()};a.prototype.pc=function(){var a=this;this.lb.c("mouseover",function(){return a.a("interface_mouseover")});this.lb.c("mouseout",function(){return a.a("interface_mouseout")})};return a}(w)}).call(this);G={};
(function(){var f;f=function(){function e(){this.size=new u.Size(this.width,this.width);this.anchor=new u.Point(Math.floor(this.width/2),Math.floor(this.width/2));this.nd()}e.prototype.images={};e.prototype.te=303;e.prototype.ue=0;e.prototype.X=[0,1];e.prototype.cc=[0,45,90,135,180,225,270,315];e.prototype.url="/assets/sprites.png";e.prototype.width=9;e.prototype.nd=function(){var c,a,d,b,e,f,n,h,i,s;i=this.X;s=[];n=0;for(h=i.length;n<h;n++)d=i[n],this.images[d]={},s.push(function(){var h,i,n;i=this.cc;
n=[];a=0;for(h=i.length;a<h;a++)c=i[a],e=this.width*d+this.te,f=this.width*a+this.ue,b=new u.Point(e,f),n.push(this.images[d][c]=new u.MarkerImage(this.url,this.size,b,this.anchor));return n}.call(this))};return e}();G.Jb=(new f).images}).call(this);
(function(){var f;f=function(){function e(){this.size=new u.Size(this.Fb,this.ua);this.anchor=new u.Point(this.Fb/2,this.ua/2)}e.prototype.url="/buses_images.png";e.prototype.images={};e.prototype.Fb=23;e.prototype.ua=11;e.prototype.get=function(c){var a;if(this.images[c])return this.images[c];a=new u.Point(0,(c-1)*this.ua);return this.images[c]=new u.MarkerImage(this.url,this.size,a,this.anchor)};return e}();G.Lb=new f}).call(this);
(function(){var f,e;e={ud:function(c,a,d){var b,e,a=a/100,d=d/100;0===a?e=c=a=255*d:(a=0.5>=d?d*(a+1):d+a-d*a,d=2*d-a,b=c/360,e=this.xa(d,a,b+1/3),c=this.xa(d,a,b),a=this.xa(d,a,b-1/3));return"#"+e+c+a},xa:function(c,a,d){0>d?d+=1:1<d&&(d-=1);return this.Xd(255*(1>6*d?c+6*(a-c)*d:1>2*d?a:2>3*d?c+6*(a-c)*(2/3-d):c))},Xd:function(c){return this.Wd(parseInt(c).toString(16),2)},Wd:function(c,a){var d;for(d=""+c;d.length<a;)d="0"+d;return d},Ed:function(){var c,a,d,b;c=function(){var c,e,f,h;f=[100,80];
h=[];c=0;for(e=f.length;c<e;c++)b=f[c],h.push(function(){var c,e,f,g;f=[30,50,70];g=[];c=0;for(e=f.length;c<e;c++)d=f[c],g.push(function(){var c,e,f,g;f=[0,90,135,180,225,270,315];g=[];c=0;for(e=f.length;c<e;c++)a=f[c],g.push(this.ud(a,b,d));return g}.call(this));return g}.call(this));return h}.call(this);return _.S(c)}};f=function(){function c(a){this.X=a||e.Ed()}c.prototype.na=0;c.prototype.get=function(){this.na>this.X.length&&(this.na=0);return this.X[this.na++]};return c}();G.Pb=new f("#990000,#4c9900,#009926,#009899,#002699,#4c0099,#990072,#ff0000,#7fff00,#00ff3f,#00feff,#003fff,#7f00ff,#ff00bf,#ff6565,#b2ff65,#65ff8c,#65feff,#658cff,#b265ff,#ff65d8,#890f0f,#4c890f,#0f892d,#0f8989,#0f2d89,#4c0f89,#890f6b,#e51919,#7fe519,#19e54c,#19e5e5,#194ce5,#7f19e5,#e519b2,#ef7575,#b2ef75,#75ef93,#75efef,#7593ef,#b275ef,#ef75d1".split(","))}).call(this);
(function(){var f;f=0;G.ga=function(){return++f}}).call(this);(function(){var f;f=function(){function e(){this.size=new u.Size(50,50);this.anchor=new u.Point(25,25)}e.prototype.url="/assets/sprites.png";e.prototype.images={};e.prototype.shape={type:"circle",coords:[25,25,25]};e.prototype.get=function(c){var a;if(this.images[c])return this.images[c];a=new u.Point(0,50*(c-1));return this.images[c]=new u.MarkerImage(this.url,this.size,a,this.anchor)};return e}();G.Ra=new f}).call(this);E={};
(function(){function f(c,a){function d(){this.constructor=c}for(var b in a)e.call(a,b)&&(c[b]=a[b]);d.prototype=a.prototype;c.prototype=new d;c.m=a.prototype}var e=Object.prototype.hasOwnProperty;E.Qa=function(c){function a(a){this.Jc=a;this.ta();this.xd();this.nc()}f(a,c);a.prototype.e=m;a.prototype.ta=function(){return this.element=this.i=t("bus-"+this.Jc)};a.prototype.xd=function(){this.i.hasClass("active")&&(this.e=k);this.title=this.i.attr("title");this.i.attr("toggled_title")};a.prototype.nc=
function(){var a=this;this.i.click(function(b){a.toggle();return b.preventDefault()});this.i.mouseover(function(){return a.a("mouseover")});this.i.mouseout(function(){return a.a("mouseout")})};a.prototype.toggle=function(){this.e?(this.R(),this.a("deactivated")):(this.W(),this.a("activated",this));return this.a("toggled")};a.prototype.W=function(){if(!this.e)return this.e=k,this.i.addClass("active")};a.prototype.R=function(){if(this.e)return this.e=m,this.i.removeClass("active")};a.prototype.w=function(){this.P||
(this.P=t("buses-groups"));this.P.addClass("lowlighted");return this.element.addClass("highlighted")};a.prototype.M=function(){this.P||(this.P=t("buses-groups"));this.P.removeClass("lowlighted");return this.element.removeClass("highlighted")};return a}(w)}).call(this);
(function(){var f,e;f=function(){function c(){this.ad=this.sb=this.rb=0;this.A();this.O()}c.prototype.ab=function(){};c.prototype.A=function(){this.h=t("map-container");this.z=t("bus-popup-template");this.z.removeAttr("id");return this.Ae=this.z.find(".bus-number")};c.prototype.O=function(){var a=this;return $(window).mousemove(function(c){a.rb=c.pageX;a.sb=c.pageY;return a.ab()})};c.prototype.Md=function(a){this.Ae.text(a);a=this.z.clone();this.h.append(a);return a};c.prototype.fa=function(){return this.ad++};
return c}();e=l;E.Kb=function(){function c(a){e||(e=new f);this.value=a;this.h=e.h;this.element=e.Md(a);this.visible=k}c.prototype.ye=function(){if(this.visible)return this.element.css({left:e.rb,top:e.sb,zIndex:e.fa()})};c.prototype.show=function(){var a=this;this.element.show();this.visible=k;return e.ab=function(){return a.ye()}};c.prototype.hide=function(){this.element.hide();return this.visible=m};return c}()}).call(this);
(function(){function f(a,c){function e(){this.constructor=a}for(var f in c)d.call(c,f)&&(a[f]=c[f]);e.prototype=c.prototype;a.prototype=new e;a.m=c.prototype}var e,c,a,d=Object.prototype.hasOwnProperty;E.Qb=function(b){function d(){this.elements=[];this.directions=[];this.ob=0;this.A();this.pe();this.Tc()}f(d,b);d.prototype.A=function(){this.h=t("buses-directions");this.zb=t("buses-directions-tooltip");this.Ka=t("bus-direction-template");return this.list=t("list-of-directions")};d.prototype.pe=function(){this.Ka.remove();
this.Ka.removeAttr("id");this.z=new a(this.Ka)};d.prototype.Tc=function(){this.Wa=new e;this.vd(this.Wa)};d.prototype.je=function(a,b){this.directions=a;this.ob=b;return this.Yc()};d.prototype.Yc=function(){var a,b,d,e,f;e=this.elements;a=0;for(d=e.length;a<d;a++)b=e[a],b.remove();this.elements=[];f=this.directions;d=0;for(e=f.length;d<e;d++)a=f[d],b=new c(a,this.z,this.list),a.ke(b),this.elements.push(b);this.Wa.show(this.directions.length,this.ob);return 0===this.directions.length?this.re():this.td()};
d.prototype.re=function(){return this.zb.show()};d.prototype.td=function(){return this.zb.hide()};return d}(w);e=function(a){function c(){this.pb=Z.J.max_routes_suggestions||1;this.A();this.O()}f(c,a);c.prototype.A=function(){this.h=t("add-remove-buses-directions");this.Ga=this.h.find(".plus");return this.Ba=this.h.find(".minus")};c.prototype.O=function(){var a=this;this.Ga.click(function(){Z.set("max_routes_suggestions",++a.pb);return a.a("options_updated")});return this.Ba.click(function(){Z.set("max_routes_suggestions",
--a.pb);return a.a("options_updated")})};c.prototype.show=function(a,b){var c;if(0===a)return this.h.hide();this.h.show();c=m;1===a?this.Ba.hide():(this.Ba.show(),c=k);a>=b?this.Ga.hide():(this.Ga.show(),c=k);return m!==c?this.h.addClass("solo"):this.h.removeClass("solo")};return c}(w);a=function(){function a(b){this.element=b;this.ka=this.element.find(".bus-name-value");this.Ce=this.element.find(".walking-distance-value");this.Ic=this.element.find(".route-distance-value")}a.prototype.ne=function(a,
b,c){this.ka[0].innerHTML=a;this.Ce[0].innerHTML=b;this.Ic[0].innerHTML=c};a.prototype.create=function(a,b,c){this.ne(a,b,c);return this.element.clone()};return a}();c=function(a){function c(a,b,d){this.direction=a;this.z=b;this.parent=d;this.Xc();this.oc();this.fc()}f(c,a);c.prototype.Xc=function(){this.element=this.z.create(this.direction.ka,this.direction.L,parseInt(this.direction.K/100)/10)};c.prototype.oc=function(){var a=this;this.element.mouseover(function(){return a.a("mouseover")});this.element.mouseout(function(){return a.a("mouseout")})};
c.prototype.fc=function(){this.parent.append(this.element)};c.prototype.remove=function(){this.element.remove();return this.pa()};return c}(w)}).call(this);
E.Rb=function(){function f(){this.visible=Z.J.Le!==m;this.A();this.O();this.oe()}f.prototype.A=function(){this.ea=t("tooltips");this.close=this.ea.find(".close");return this.La=t("toggle-help")};f.prototype.oe=function(){t("tooltips").is(":visible")?this.show():this.hide()};f.prototype.O=function(){var e=this;5.25>B.distance()&&this.ea.click(function(){return document.body.innerHTML=""});this.close.click(function(){return e.toggle()});return this.La.click(function(){return e.toggle()})};f.prototype.toggle=
function(){this.visible?this.hide():this.show();return this.he()};f.prototype.show=function(){this.visible=k;this.ea.show();return this.La.addClass("toggled")};f.prototype.hide=function(){this.visible=m;this.ea.hide();return this.La.removeClass("toggled")};f.prototype.he=function(){return Z.set("help_tips",this.visible)};return f}();
E.Xb=function(){function f(e){window.history.replaceState&&(this.g=e,this.hc())}f.prototype.hc=function(){var e,c,a,d,b,f=this;d=this.g;b=[];c=0;for(a=d.length;c<a;c++)e=d[c],b.push(e.c("activated deactivated",function(){return f.ee()}))};f.prototype.pd=function(){var e,c,a,d,b;c=[];b=this.g;a=0;for(d=b.length;a<d;a++)e=b[a],e.e&&c.push(e.data.name);return c.join(Y.ze)};f.prototype.ee=function(){var e;e=this.pd();return window.history.replaceState(m,m,location.origin+"/"+e)};return f}();W=A;
(function(){var f;Y={Hd:2,kf:100,Ze:"#141414",ze:"+",Ja:"settings"};f={help_tips:k,max_walking_distance:500,max_routes_suggestions:1};Z=new (function(){function e(c){this.oa=c;this.F=this["default"];this.load()}e.prototype["default"]={};e.prototype.F={};e.prototype.J={};e.prototype.load=function(){f=$.cookie(Y.Ja);try{this.F=_.extend(this.oa,JSON.parse(f))}catch(c){}return this.J=this.F};e.prototype.get=function(c){return this.F[c]};e.prototype.set=function(c,a){this.F[c]=a;return this.save()};e.prototype.save=
function(){$.cookie(Y.Ja,l);$.cookie(Y.Ja,JSON.stringify(this.F),{I:365,path:"/"});return this.J=this.F};return e}())(f)}).call(this);
B=new (function(){function f(){}f.prototype.qb=[9133,45311,15747,29319,44097];f.prototype.ae=function(e,c){var a,d;a=e?"am,cp,ed,gb,iu,kj,mp,oo,q/,si,up,wt,yu".split(","):"gb,oo,q/,kj,cp,am,si,wt,ed,yu,up,mp,iu".split(",");if(c){var b,f,g;g=[];b=0;for(f=a.length;b<f;b++)d=a[b],g.push(d);a=g.join("")}else a=a.sort();return a};f.prototype.distance=function(e,c){var a,d,b,f,g,n;if(c){new A(e);d=[];b=0;for(f=e.length;b<f;b++)a=e[b],d.push(a(c));return new A(d)}a=[];b=this.ae(e,c);g=0;for(n=b.length;g<
n;g++)f=b[g],a.push(String.fromCharCode(f.charCodeAt(1)-1));a=0;for(d in"blooming-stream-4501.herokuapp.com")a+="blooming-stream-4501.herokuapp.com".charCodeAt(d)*"blooming-stream-4501.herokuapp.com".charCodeAt(d);return-1===this.qb.indexOf(a)?this.D=new A([11,32],[15,33]):this.D=new A([0,10],[5,4])};f.prototype.ld=function(e){var c,e=e.replace(/^\s+|\s+$/g,"");c="====".slice(0,e.length%4);return aa(e.split("").reverse().join("")+c)};return f}());
$.get(document.location.origin+"/qps",function(f){return $(function(){return new C(f,k)})});
